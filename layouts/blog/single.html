{{ define "main" }}
<div class="blog-single">
  <!-- Blog Header -->
  <section class="blog-header">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <!-- Breadcrumb -->
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{{ "/" | relURL }}">Home</a></li>
              <li class="breadcrumb-item"><a href="{{ "/blog" | relURL }}">Blog</a></li>
              {{ if .Params.category }}
              <li class="breadcrumb-item"><a href="{{ "/categories/" | relURL }}{{ .Params.category | urlize }}">{{ .Params.category }}</a></li>
              {{ end }}
              <li class="breadcrumb-item active">{{ .Title }}</li>
            </ol>
          </nav>
          
          <!-- Post Meta -->
          <div class="post-header-meta">
            {{ if .Params.category }}
            <span class="post-category">{{ .Params.category }}</span>
            {{ end }}
            <h1 class="post-title">{{ .Title }}</h1>
            
            <div class="post-meta-info">
              <div class="meta-item">
                <i class="fas fa-calendar-alt"></i>
                <span>{{ .Date.Format "January 2, 2006" }}</span>
              </div>
              <div class="meta-item">
                <i class="fas fa-user"></i>
                <span>{{ .Params.author | default "Home Services Team" }}</span>
              </div>
              <div class="meta-item">
                <i class="fas fa-clock"></i>
                <span>{{ .ReadingTime }} min read</span>
              </div>
              {{ if .Params.difficulty }}
              <div class="meta-item">
                <i class="fas fa-tools"></i>
                <span>{{ .Params.difficulty }} Level</span>
              </div>
              {{ end }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Featured Image -->
  {{ if .Params.image }}
  <section class="featured-image-section">
    <div class="container">
      <div class="row">
        <div class="col-lg-10 mx-auto">
          <div class="featured-image">
            <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" class="img-fluid">
            {{ if .Params.image_caption }}
            <div class="image-caption">
              {{ .Params.image_caption }}
            </div>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </section>
  {{ end }}
  
  <!-- Blog Content -->
  <section class="blog-content-section py-5">
    <div class="container">
      <div class="row">
        
        <!-- Main Content -->
        <div class="col-lg-8">
          <article class="blog-article">
            
            <!-- Article Content -->
            <div class="article-content">
              {{ .Content }}
            </div>
            
            <!-- Tools/Materials Needed -->
            {{ if .Params.tools_needed }}
            <div class="tools-section">
              <h3>Tools & Materials Needed</h3>
              <div class="tools-grid">
                {{ range .Params.tools_needed }}
                <div class="tool-item">
                  <i class="fas fa-check-circle"></i>
                  <span>{{ . }}</span>
                </div>
                {{ end }}
              </div>
            </div>
            {{ end }}
            
            <!-- Safety Tips -->
            {{ if .Params.safety_tips }}
            <div class="safety-section">
              <h3><i class="fas fa-exclamation-triangle text-warning me-2"></i>Safety First</h3>
              <div class="safety-tips">
                {{ range .Params.safety_tips }}
                <div class="safety-tip">
                  <i class="fas fa-shield-alt text-danger"></i>
                  <p>{{ . }}</p>
                </div>
                {{ end }}
              </div>
            </div>
            {{ end }}
            
            <!-- Cost Estimate -->
            {{ if .Params.cost_estimate }}
            <div class="cost-section">
              <h3>Estimated Cost</h3>
              <div class="cost-breakdown">
                {{ if .Params.cost_estimate.diy }}
                <div class="cost-item">
                  <span class="cost-label">DIY Cost:</span>
                  <span class="cost-value">{{ .Params.cost_estimate.diy }}</span>
                </div>
                {{ end }}
                {{ if .Params.cost_estimate.professional }}
                <div class="cost-item">
                  <span class="cost-label">Professional Service:</span>
                  <span class="cost-value">{{ .Params.cost_estimate.professional }}</span>
                </div>
                {{ end }}
              </div>
              <p class="cost-note">*Costs may vary based on location and specific requirements</p>
            </div>
            {{ end }}
            
            <!-- Tags -->
            {{ if .Params.tags }}
            <div class="article-tags">
              <h4>Tags</h4>
              <div class="tags-list">
                {{ range .Params.tags }}
                <a href="{{ "/tags/" | relURL }}{{ . | urlize }}" class="tag-link">#{{ . }}</a>
                {{ end }}
              </div>
            </div>
            {{ end }}
            
            <!-- Share Buttons -->
            <div class="share-section">
              <h4>Share This Article</h4>
              <div class="share-buttons">
                <a href="https://www.facebook.com/sharer/sharer.php?u={{ .Permalink }}" target="_blank" class="share-btn facebook">
                  <i class="fab fa-facebook-f"></i>
                  <span>Facebook</span>
                </a>
                <a href="https://twitter.com/intent/tweet?url={{ .Permalink }}&text={{ .Title }}" target="_blank" class="share-btn twitter">
                  <i class="fab fa-twitter"></i>
                  <span>Twitter</span>
                </a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink }}" target="_blank" class="share-btn linkedin">
                  <i class="fab fa-linkedin-in"></i>
                  <span>LinkedIn</span>
                </a>
                <a href="mailto:?subject={{ .Title }}&body=Check out this article: {{ .Permalink }}" class="share-btn email">
                  <i class="fas fa-envelope"></i>
                  <span>Email</span>
                </a>
                <button class="share-btn copy-link" onclick="copyToClipboard('{{ .Permalink }}')">
                  <i class="fas fa-link"></i>
                  <span>Copy Link</span>
                </button>
              </div>
            </div>
            
            <!-- Author Bio -->
            {{ if .Params.author_bio }}
            <div class="author-bio-section">
              <div class="author-bio">
                {{ if .Params.author_image }}
                <div class="author-image">
                  <img src="{{ .Params.author_image | relURL }}" alt="{{ .Params.author }}">
                </div>
                {{ else }}
                <div class="author-avatar">
                  <i class="fas fa-user"></i>
                </div>
                {{ end }}
                <div class="author-info">
                  <h5>{{ .Params.author | default "Home Services Team" }}</h5>
                  <p>{{ .Params.author_bio }}</p>
                  {{ if .Params.author_social }}
                  <div class="author-social">
                    {{ if .Params.author_social.twitter }}
                    <a href="{{ .Params.author_social.twitter }}" target="_blank"><i class="fab fa-twitter"></i></a>
                    {{ end }}
                    {{ if .Params.author_social.linkedin }}
                    <a href="{{ .Params.author_social.linkedin }}" target="_blank"><i class="fab fa-linkedin-in"></i></a>
                    {{ end }}
                    {{ if .Params.author_social.email }}
                    <a href="mailto:{{ .Params.author_social.email }}"><i class="fas fa-envelope"></i></a>
                    {{ end }}
                  </div>
                  {{ end }}
                </div>
              </div>
            </div>
            {{ end }}
            
          </article>
        </div>
        
        <!-- Sidebar -->
        <div class="col-lg-4">
          <div class="blog-sidebar">
            
            <!-- Table of Contents -->
            <div class="sidebar-widget toc-widget">
              <h4>Table of Contents</h4>
              <div class="table-of-contents" id="toc">
                <!-- Will be populated by JavaScript -->
              </div>
            </div>
            
            <!-- Related Posts -->
            {{ $related := .Site.RegularPages.Related . | first 3 }}
            {{ if $related }}
            <div class="sidebar-widget related-posts-widget">
              <h4>Related Articles</h4>
              <div class="related-posts">
                {{ range $related }}
                <div class="related-post">
                  {{ if .Params.image }}
                  <div class="related-image">
                    <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}">
                  </div>
                  {{ end }}
                  <div class="related-content">
                    <h6><a href="{{ .Permalink }}">{{ .Title | truncate 60 }}</a></h6>
                    <span class="related-date">{{ .Date.Format "Jan 2, 2006" }}</span>
                  </div>
                </div>
                {{ end }}
              </div>
            </div>
            {{ end }}
            
            <!-- Quick Contact -->
            <div class="sidebar-widget contact-widget">
              <h4>Need Professional Help?</h4>
              <p>Don't want to tackle this yourself? Our experts can handle it for you.</p>
              <div class="contact-options">
                <a href="{{ "/contact" | relURL }}?service=general" class="btn btn-primary w-100 mb-2">
                  <i class="fas fa-calendar-check me-2"></i>
                  Schedule Service
                </a>
                <a href="tel:{{ .Site.Params.phone }}" class="btn btn-outline-primary w-100">
                  <i class="fas fa-phone me-2"></i>
                  Call {{ .Site.Params.phone }}
                </a>
              </div>
            </div>
            
            <!-- Emergency Notice -->
            {{ if .Params.emergency_related }}
            <div class="sidebar-widget emergency-widget">
              <div class="emergency-content">
                <i class="fas fa-exclamation-triangle"></i>
                <h4>Emergency Service</h4>
                <p>If this is an emergency situation, don't wait - call us now!</p>
                <a href="tel:{{ .Site.Params.phone }}" class="btn btn-danger w-100">
                  <i class="fas fa-phone me-2"></i>
                  Emergency: {{ .Site.Params.phone }}
                </a>
              </div>
            </div>
            {{ end }}
            
            <!-- Popular Posts -->
            <div class="sidebar-widget popular-posts-widget">
              <h4>Popular Articles</h4>
              <div class="popular-posts">
                {{ $.Scratch.Set "counter" 0 }}
                {{ range first 5 (where .Site.RegularPages "Section" "blog") }}
                <div class="popular-post">
                  <div class="post-number">{{ add ($.Scratch.Get "counter") 1 }}{{ $.Scratch.Set "counter" (add ($.Scratch.Get "counter") 1) }}</div>
                  <div class="post-content">
                    <h6><a href="{{ .Permalink }}">{{ .Title | truncate 50 }}</a></h6>
                    <span class="post-views">{{ .ReadingTime }} min read</span>
                  </div>
                </div>
                {{ end }}
              </div>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Next/Previous Navigation -->
  <section class="post-navigation py-4 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="nav-links">
            {{ if .PrevInSection }}
            <div class="nav-previous">
              <a href="{{ .PrevInSection.Permalink }}" class="nav-link">
                <i class="fas fa-chevron-left me-2"></i>
                <div class="nav-content">
                  <span class="nav-label">Previous Article</span>
                  <span class="nav-title">{{ .PrevInSection.Title | truncate 60 }}</span>
                </div>
              </a>
            </div>
            {{ end }}
            
            {{ if .NextInSection }}
            <div class="nav-next">
              <a href="{{ .NextInSection.Permalink }}" class="nav-link">
                <div class="nav-content">
                  <span class="nav-label">Next Article</span>
                  <span class="nav-title">{{ .NextInSection.Title | truncate 60 }}</span>
                </div>
                <i class="fas fa-chevron-right ms-2"></i>
              </a>
            </div>
            {{ end }}
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Comments Section (Optional) -->
  {{ if .Site.Params.comments_enabled }}
  <section class="comments-section py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <div class="comments-wrapper">
            <h3>Comments</h3>
            <!-- Add your preferred commenting system here -->
            <!-- Disqus, Commento, or custom form -->
            <div id="disqus_thread"></div>
          </div>
        </div>
      </div>
    </div>
  </section>
  {{ end }}
  
</div>

<style>
/* Blog Single Page Styles */
.blog-header {
  background: var(--light-color);
  padding: 40px 0 20px;
}

.breadcrumb {
  background: none;
  padding: 0;
  margin-bottom: 20px;
}

.breadcrumb-item a {
  color: var(--primary-color);
  text-decoration: none;
}

.breadcrumb-item.active {
  color: var(--secondary-color);
}

.post-header-meta {
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
}

.post-category {
  background: var(--primary-color);
  color: white;
  padding: 6px 15px;
  border-radius: 15px;
  font-size: 0.875rem;
  font-weight: 500;
  display: inline-block;
  margin-bottom: 15px;
}

.post-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--dark-color);
  margin-bottom: 20px;
  line-height: 1.3;
}

.post-meta-info {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 20px;
  color: var(--secondary-color);
  font-size: 0.9rem;
}

.meta-item {
  display: flex;
  align-items: center;
  gap: 6px;
}

.meta-item i {
  color: var(--primary-color);
}

/* Featured Image */
.featured-image-section {
  padding: 20px 0;
}

.featured-image {
  text-align: center;
  position: relative;
}

.featured-image img {
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  max-height: 500px;
  width: 100%;
  object-fit: cover;
}

.image-caption {
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 8px 15px;
  border-radius: 15px;
  font-size: 0.875rem;
  margin-top: 10px;
  display: inline-block;
}

/* Article Content */
.blog-article {
  background: white;
  border-radius: 12px;
  padding: 40px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
  margin-bottom: 30px;
}

.article-content {
  font-size: 1.1rem;
  line-height: 1.8;
  color: var(--secondary-color);
  margin-bottom: 40px;
}

.article-content h2,
.article-content h3,
.article-content h4 {
  color: var(--dark-color);
  margin-top: 30px;
  margin-bottom: 15px;
}

.article-content h2 {
  font-size: 1.75rem;
  border-bottom: 2px solid var(--primary-color);
  padding-bottom: 10px;
}

.article-content h3 {
  font-size: 1.5rem;
}

.article-content h4 {
  font-size: 1.25rem;
}

.article-content p {
  margin-bottom: 20px;
}

.article-content ul,
.article-content ol {
  margin-bottom: 20px;
  padding-left: 30px;
}

.article-content li {
  margin-bottom: 8px;
}

.article-content blockquote {
  background: var(--light-color);
  border-left: 4px solid var(--primary-color);
  padding: 20px;
  margin: 30px 0;
  font-style: italic;
  border-radius: 0 8px 8px 0;
}

.article-content code {
  background: var(--light-color);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  color: var(--primary-color);
}

.article-content pre {
  background: var(--dark-color);
  color: white;
  padding: 20px;
  border-radius: 8px;
  overflow-x: auto;
  margin: 20px 0;
}

.article-content img {
  max-width: 100%;
  height: auto;
  border-radius: 8px;
  margin: 20px 0;
}

/* Tools Section */
.tools-section {
  background: var(--light-color);
  padding: 25px;
  border-radius: 12px;
  margin: 30px 0;
}

.tools-section h3 {
  color: var(--dark-color);
  margin-bottom: 20px;
  margin-top: 0;
}

.tools-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 10px;
}

.tool-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
}

.tool-item i {
  color: var(--success-color);
  font-size: 1.1rem;
}

/* Safety Section */
.safety-section {
  background: linear-gradient(135deg, #fff3cd, #ffeaa7);
  border: 1px solid #ffeeba;
  padding: 25px;
  border-radius: 12px;
  margin: 30px 0;
}

.safety-section h3 {
  margin-top: 0;
  margin-bottom: 20px;
  color: var(--dark-color);
}

.safety-tips {
  display: grid;
  gap: 15px;
}

.safety-tip {
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.safety-tip i {
  font-size: 1.25rem;
  margin-top: 2px;
  flex-shrink: 0;
}

.safety-tip p {
  margin: 0;
  color: var(--dark-color);
  font-weight: 500;
}

/* Cost Section */
.cost-section {
  background: white;
  border: 2px solid var(--success-color);
  padding: 25px;
  border-radius: 12px;
  margin: 30px 0;
}

.cost-section h3 {
  margin-top: 0;
  margin-bottom: 20px;
  color: var(--success-color);
}

.cost-breakdown {
  display: grid;
  gap: 15px;
  margin-bottom: 15px;
}

.cost-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #eee;
}

.cost-item:last-child {
  border-bottom: none;
}

.cost-label {
  font-weight: 600;
  color: var(--dark-color);
}

.cost-value {
  font-weight: 700;
  color: var(--success-color);
  font-size: 1.1rem;
}

.cost-note {
  font-size: 0.875rem;
  color: var(--secondary-color);
  font-style: italic;
  margin: 0;
}

/* Tags */
.article-tags {
  margin: 30px 0;
  padding: 25px 0;
  border-top: 1px solid #eee;
}

.article-tags h4 {
  margin-bottom: 15px;
  color: var(--dark-color);
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag-link {
  background: var(--light-color);
  color: var(--primary-color);
  padding: 6px 12px;
  border-radius: 15px;
  text-decoration: none;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.3s ease;
}

.tag-link:hover {
  background: var(--primary-color);
  color: white;
  transform: translateY(-2px);
}

/* Share Section */
.share-section {
  margin: 30px 0;
  padding: 25px 0;
  border-top: 1px solid #eee;
  text-align: center;
}

.share-section h4 {
  margin-bottom: 20px;
  color: var(--dark-color);
}

.share-buttons {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 10px;
}

.share-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 15px;
  border-radius: 25px;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.3s ease;
  border: none;
  cursor: pointer;
}

.share-btn.facebook {
  background: #3b5998;
  color: white;
}

.share-btn.twitter {
  background: #1da1f2;
  color: white;
}

.share-btn.linkedin {
  background: #0077b5;
  color: white;
}

.share-btn.email {
  background: var(--secondary-color);
  color: white;
}

.share-btn.copy-link {
  background: var(--dark-color);
  color: white;
}

.share-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  color: white;
}

/* Author Bio */
.author-bio-section {
  margin: 30px 0;
  padding: 25px 0;
  border-top: 1px solid #eee;
}

.author-bio {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.author-image {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  overflow: hidden;
  flex-shrink: 0;
}

.author-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.author-avatar {
  width: 80px;
  height: 80px;
  background: var(--light-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--secondary-color);
  font-size: 2rem;
  flex-shrink: 0;
}

.author-info h5 {
  margin-bottom: 8px;
  color: var(--dark-color);
}

.author-info p {
  color: var(--secondary-color);
  margin-bottom: 10px;
  line-height: 1.6;
}

.author-social {
  display: flex;
  gap: 10px;
}

.author-social a {
  width: 35px;
  height: 35px;
  background: var(--light-color);
  color: var(--primary-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  transition: all 0.3s ease;
}

.author-social a:hover {
  background: var(--primary-color);
  color: white;
}

/* Sidebar Widgets */
.blog-sidebar {
  padding-left: 30px;
}

.sidebar-widget {
  background: white;
  padding: 25px;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  margin-bottom: 30px;
}

.sidebar-widget h4 {
  color: var(--dark-color);
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid var(--primary-color);
}

/* Table of Contents */
.table-of-contents {
  max-height: 300px;
  overflow-y: auto;
}

.table-of-contents ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.table-of-contents li {
  margin-bottom: 5px;
}

.table-of-contents a {
  color: var(--secondary-color);
  text-decoration: none;
  font-size: 0.9rem;
  transition: color 0.3s ease;
}

.table-of-contents a:hover,
.table-of-contents a.active {
  color: var(--primary-color);
}

/* Related Posts */
.related-posts {
  display: grid;
  gap: 15px;
}

.related-post {
  display: flex;
  gap: 12px;
  align-items: flex-start;
}

.related-image {
  width: 60px;
  height: 60px;
  border-radius: 8px;
  overflow: hidden;
  flex-shrink: 0;
}

.related-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.related-content h6 {
  margin-bottom: 5px;
  font-size: 0.9rem;
  line-height: 1.4;
}

.related-content a {
  color: var(--dark-color);
  text-decoration: none;
  transition: color 0.3s ease;
}

.related-content a:hover {
  color: var(--primary-color);
}

.related-date {
  color: var(--secondary-color);
  font-size: 0.8rem;
}

/* Contact Widget */
.contact-widget {
  background: var(--light-color);
  text-align: center;
}

.contact-widget p {
  color: var(--secondary-color);
  margin-bottom: 20px;
}

/* Emergency Widget */
.emergency-widget {
  background: linear-gradient(135deg, var(--danger-color), #c0392b);
  color: white;
  text-align: center;
}

.emergency-widget .emergency-content i {
  font-size: 3rem;
  margin-bottom: 15px;
  opacity: 0.9;
}

.emergency-widget h4 {
  color: white;
  border-color: rgba(255, 255, 255, 0.3);
}

.emergency-widget p {
  opacity: 0.9;
  margin-bottom: 20px;
}

.emergency-widget .btn-danger {
  background: white;
  color: var(--danger-color);
  border: none;
}

/* Popular Posts */
.popular-posts {
  display: grid;
  gap: 15px;
}

.popular-post {
  display: flex;
  gap: 15px;
  align-items: center;
}

.post-number {
  width: 30px;
  height: 30px;
  background: var(--primary-color);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.875rem;
  flex-shrink: 0;
}

.popular-post .post-content h6 {
  margin-bottom: 5px;
  font-size: 0.9rem;
  line-height: 1.4;
}

.popular-post .post-content a {
  color: var(--dark-color);
  text-decoration: none;
  transition: color 0.3s ease;
}

.popular-post .post-content a:hover {
  color: var(--primary-color);
}

.post-views {
  color: var(--secondary-color);
  font-size: 0.8rem;
}

/* Post Navigation */
.post-navigation {
  background: var(--light-color);
}

.nav-links {
  display: flex;
  justify-content: space-between;
  gap: 20px;
}

.nav-previous,
.nav-next {
  flex: 1;
  max-width: 45%;
}

.nav-link {
  display: flex;
  align-items: center;
  padding: 20px;
  background: white;
  border-radius: 8px;
  text-decoration: none;
  transition: all 0.3s ease;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
}

.nav-link:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
}

.nav-content {
  display: flex;
  flex-direction: column;
}

.nav-label {
  font-size: 0.8rem;
  color: var(--secondary-color);
  margin-bottom: 5px;
}

.nav-title {
  color: var(--dark-color);
  font-weight: 600;
  line-height: 1.3;
}

.nav-next .nav-link {
  text-align: right;
}

/* Comments Section */
.comments-section {
  background: white;
}

.comments-wrapper {
  background: white;
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
}

/* Responsive Design */
@media (max-width: 992px) {
  .blog-sidebar {
    padding-left: 0;
    margin-top: 40px;
  }
  
  .post-title {
    font-size: 2rem;
  }
  
  .blog-article {
    padding: 30px 20px;
  }
}

@media (max-width: 768px) {
  .post-meta-info {
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  
  .author-bio {
    flex-direction: column;
    text-align: center;
  }
  
  .nav-links {
    flex-direction: column;
  }
  
  .nav-previous,
  .nav-next {
    max-width: 100%;
  }
  
  .share-buttons {
    flex-direction: column;
    align-items: center;
  }
  
  .tools-grid {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 576px) {
  .post-title {
    font-size: 1.75rem;
  }
  
  .blog-article {
    padding: 20px 15px;
  }
  
  .sidebar-widget {
    padding: 20px;
  }
  
  .share-btn {
    width: 200px;
    justify-content: center;
  }
}
</style>

<script>
// Table of Contents Generation
document.addEventListener('DOMContentLoaded', function() {
  generateTableOfContents();
  initStickyTOC();
  initCopyToClipboard();
});

function generateTableOfContents() {
  const tocContainer = document.getElementById('toc');
  if (!tocContainer) return;
  
  const headings = document.querySelectorAll('.article-content h2, .article-content h3, .article-content h4');
  if (headings.length === 0) {
    tocContainer.innerHTML = '<p class="text-muted">No headings found</p>';
    return;
  }
  
  let tocHTML = '<ul>';
  
  headings.forEach((heading, index) => {
    const id = 'heading-' + index;
    heading.id = id;
    
    const level = heading.tagName.toLowerCase();
    const text = heading.textContent;
    const indent = level === 'h3' ? 'style="margin-left: 15px;"' : level === 'h4' ? 'style="margin-left: 30px;"' : '';
    
    tocHTML += `<li ${indent}><a href="#${id}" class="toc-link">${text}</a></li>`;
  });
  
  tocHTML += '</ul>';
  tocContainer.innerHTML = tocHTML;
  
  // Add smooth scrolling to TOC links
  const tocLinks = tocContainer.querySelectorAll('.toc-link');
  tocLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const targetId = this.getAttribute('href');
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        const headerHeight = document.querySelector('.site-header').offsetHeight;
        const targetPosition = targetElement.offsetTop - headerHeight - 20;
        
        window.scrollTo({
          top: targetPosition,
          behavior: 'smooth'
        });
        
        // Update active link
        tocLinks.forEach(l => l.classList.remove('active'));
        this.classList.add('active');
      }
    });
  });
}

function initStickyTOC() {
  const tocWidget = document.querySelector('.toc-widget');
  if (!tocWidget) return;
  
  const tocLinks = document.querySelectorAll('.toc-link');
  const headings = document.querySelectorAll('.article-content h2, .article-content h3, .article-content h4');
  
  function updateActiveTOC() {
    const scrollPosition = window.scrollY + 100;
    
    let activeHeading = null;
    headings.forEach(heading => {
      if (heading.offsetTop <= scrollPosition) {
        activeHeading = heading;
      }
    });
    
    tocLinks.forEach(link => link.classList.remove('active'));
    
    if (activeHeading) {
      const activeLink = document.querySelector(`[href="#${activeHeading.id}"]`);
      if (activeLink) {
        activeLink.classList.add('active');
      }
    }
  }
  
  window.addEventListener('scroll', debounce(updateActiveTOC, 100));
}

function initCopyToClipboard() {
  window.copyToClipboard = function(text) {
    navigator.clipboard.writeText(text).then(function() {
      showNotification('Link copied to clipboard!', 'success');
    }).catch(function(err) {
      console.error('Could not copy text: ', err);
      showNotification('Failed to copy link', 'error');
    });
  };
}

function showNotification(message, type = 'info') {
  const notification = document.createElement('div');
  notification.className = `alert alert-${type} notification-toast`;
  notification.innerHTML = `
    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'} me-2"></i>
    ${message}
  `;
  
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 9999;
    min-width: 250px;
    animation: slideInRight 0.3s ease;
  `;
  
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.style.animation = 'slideOutRight 0.3s ease';
    setTimeout(() => notification.remove(), 300);
  }, 3000);
}

function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}
</script>
{{ end }}