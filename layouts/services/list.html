{{ define "main" }}
<div class="services-page">
  <!-- Page Header -->
  <section class="page-header {{ if not .Params.image }}page-header-gradient{{ end }}">
    {{ if .Params.image }}  
    <div class="page-header-bg">
      <img src="{{ .Params.image | relURL }}" 
           alt="{{ .Params.hero_title | default "Our Services" }}" 
           class="header-background-image">
    </div>
    {{ end }}
    <div class="page-header-overlay"></div>
    <div class="page-header-content">
      <div class="container">
        <div class="row">
          <div class="col-12 text-center">
            <h1 class="page-title">{{ .Title }}</h1>
            <p class="page-subtitle">{{ .Params.subtitle }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Services Overview -->
  <section class="services-overview py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center mb-5">
          <h2>Complete Home Service Solutions</h2>
          <p class="lead">From emergency repairs to major renovations, we provide comprehensive home services with professional quality and guaranteed satisfaction.</p>
          
          <div class="service-highlights">
            <div class="row justify-content-center">
              <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
                <div class="highlight-item">
                  <div class="highlight-icon">
                    <i class="fas fa-tools"></i>
                  </div>
                  <div class="highlight-content">
                    <h5>Expert Technicians</h5>
                    <p>Certified professionals with years of experience</p>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
                <div class="highlight-item">
                  <div class="highlight-icon">
                    <i class="fas fa-clock"></i>
                  </div>
                  <div class="highlight-content">
                    <h5>24/7 Emergency</h5>
                    <p>Available when you need us most</p>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-4 col-sm-12 mb-4">
                <div class="highlight-item">
                  <div class="highlight-icon">
                    <i class="fas fa-shield-alt"></i>
                  </div>
                  <div class="highlight-content">
                    <h5>Licensed & Insured</h5>
                    <p>Full protection for your peace of mind</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Our Services -->
  <section class="our-services py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2>Our Services</h2>
          <p>Professional home services tailored to your business needs</p>
        </div>
      </div>
      
      <!-- Services Grid -->
      <div class="row services-grid">
        {{ range .Pages }}
        <div class="col-lg-4 col-md-6 mb-4">
          <div class="service-card h-100">
            <!-- Service Image -->
            {{ if .Params.image }}
            <div class="service-image">
              <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" class="img-fluid">
              <div class="service-overlay">
                <div class="service-badges">
                  {{ if .Params.emergency }}
                  <span class="badge bg-danger">Emergency Available</span>
                  {{ end }}
                  {{ if .Params.same_day }}
                  <span class="badge bg-warning">Same Day Service</span>
                  {{ end }}
                  {{ if .Params.free_estimate }}
                  <span class="badge bg-success">Free Estimate</span>
                  {{ end }}
                </div>
              </div>
            </div>
            {{ else }}
            <div class="service-image-placeholder">
              <i class="{{ .Params.icon | default "fas fa-tools" }}"></i>
            </div>
            {{ end }}
            
            <!-- Service Content -->
            <div class="service-content">
              <div class="service-header">
                <h3>{{ .Title }}</h3>
                <div class="service-meta">
                  <span class="service-type">{{ .Params.service_type | default "Residential & Commercial" }}</span>
                  {{ if .Params.rating }}
                  <div class="service-rating">
                    {{ range seq (int .Params.rating) }}
                    <i class="fas fa-star"></i>
                    {{ end }}
                    <span class="rating-text">({{ .Params.reviews | default "50" }} reviews)</span>
                  </div>
                  {{ end }}
                </div>
              </div>
              
              <p class="service-description">{{ .Summary | truncate 120 }}</p>
              
              <!-- Service Features -->
              {{ if .Params.features }}
              <div class="service-features">
                <h5>Service Includes:</h5>
                <ul>
                  {{ range .Params.features }}
                  <li><i class="fas fa-check text-success"></i> {{ . }}</li>
                  {{ end }}
                </ul>
              </div>
              {{ end }}
              
              <!-- Pricing -->
              <div class="service-pricing">
                {{ if .Params.starting_price }}
                <div class="price-info">
                  <span class="price-label">Starting at</span>
                  <span class="price">{{ .Params.starting_price }}</span>
                </div>
                {{ end }}
                {{ if .Params.hourly_rate }}
                <div class="price-info">
                  <span class="price-label">Hourly Rate</span>
                  <span class="price">{{ .Params.hourly_rate }}</span>
                </div>
                {{ end }}
              </div>
              
              <!-- Call to Action -->
              <div class="service-actions">
                <a href="{{ .Permalink }}" class="btn btn-primary">Learn More</a>
                <a href="{{ "contact" | relURL }}?service={{ .Title | urlize }}" class="btn btn-outline-primary">Get Quote</a>
              </div>
              
              <!-- Location-Specific Services -->
              {{ if .Pages }}
              <div class="location-services">
                <h6 class="location-title">
                  <i class="fas fa-map-marker-alt me-1"></i>
                  Location-Specific Services:
                </h6>
                <div class="location-links">
                  {{ range .Pages }}
                  {{ if .Params.location }}
                  <a href="{{ .Permalink }}" class="location-link">
                    {{ .Params.location }}
                  </a>
                  {{ end }}
                  {{ end }}
                </div>
              </div>
              {{ end }}
              
              <!-- Service Areas -->
              {{ if .Params.service_areas }}
              <div class="service-areas">
                <small class="text-muted">
                  <i class="fas fa-map-marker-alt me-1"></i>
                  Serving: {{ delimit .Params.service_areas ", " }}
                </small>
              </div>
              {{ end }}
            </div>
          </div>
        </div>
        {{ end }}
      </div>
    </div>
  </section>
  
  <!-- Service Process -->
  <section class="service-process py-5">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center mb-5">
          <h2>How We Work</h2>
          <p>Our simple 4-step process ensures quality service every time</p>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="process-step">
            <div class="step-number">1</div>
            <div class="step-icon">
              <i class="fas fa-phone"></i>
            </div>
            <h4>Contact Us</h4>
            <p>Call us or fill out our online form to describe your service needs</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="process-step">
            <div class="step-number">2</div>
            <div class="step-icon">
              <i class="fas fa-calendar-check"></i>
            </div>
            <h4>Schedule Service</h4>
            <p>We'll schedule a convenient time for our technician to visit</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="process-step">
            <div class="step-number">3</div>
            <div class="step-icon">
              <i class="fas fa-tools"></i>
            </div>
            <h4>Expert Service</h4>
            <p>Our certified technician completes the work with professional quality</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="process-step">
            <div class="step-number">4</div>
            <div class="step-icon">
              <i class="fas fa-thumbs-up"></i>
            </div>
            <h4>Satisfaction Guaranteed</h4>
            <p>We ensure you're completely satisfied with our work</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Service Areas -->
  <section class="service-areas-section py-5 bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto text-center">
          <h2>Areas We Serve</h2>
          <p class="mb-4">Professional home services across {{ .Site.Params.primary_location }} and surrounding communities</p>
          
          <div class="areas-grid">
            <div class="primary-area">
              <i class="fas fa-map-marker-alt"></i>
              <h4>{{ .Site.Params.primary_location }}</h4>
              <p>Primary Service Area</p>
            </div>
            
            <div class="surrounding-areas">
              {{ if .Site.Params.service_areas }}
              {{ range .Site.Params.service_areas }}
              <div class="area-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ . }}</span>
              </div>
              {{ end }}
              {{ end }}
            </div>
          </div>
          
          <div class="area-note">
            <p class="text-muted">Don't see your area listed? <a href="{{ "contact" | relURL }}">Contact us</a> to check service availability in your location.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Emergency Services CTA -->
  <section class="emergency-cta py-5">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="emergency-banner">
            <div class="emergency-content">
              <div class="emergency-icon">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <div class="emergency-text">
                <h3>Need Emergency Service?</h3>
                <p>Available 24/7 for urgent repairs and emergency situations</p>
              </div>
              <div class="emergency-action">
                <a href="tel:{{ .Site.Params.phone }}" class="btn btn-danger btn-lg">
                  <i class="fas fa-phone me-2"></i>
                  Call {{ .Site.Params.phone }}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  
</div>

<style>
/* Services Page Styles */
.services-page .page-header {
  position: relative;
  color: white;
  padding: 100px 0;
  min-height: 400px;
  display: flex;
  align-items: center;
  overflow: hidden;
}

.page-header-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

.header-background-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  display: block;
}

.page-header-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  z-index: 2;
}

.page-header-content {
  position: relative;
  z-index: 3;
  width: 100%;
}

.page-title {
  color: white;
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.page-subtitle {
  color: rgba(255, 255, 255, 0.95);
  font-size: 1.25rem;
}

/* Gradient background when no image is present */
.page-header-gradient {
  background: linear-gradient(135deg, 
    #ff6b6b 0%,     /* Coral/Red */
    #ee5a6f 25%,    /* Pink-Red */
    #a855f7 50%,    /* Purple */
    #6366f1 75%,    /* Indigo */
    #3b82f6 100%    /* Blue */
  );
}

.services-overview .highlight-item {
  text-align: center;
  padding: 30px 20px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.services-overview .highlight-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
}

.services-overview .highlight-item .highlight-icon {
  width: 80px;
  height: 80px;
  background: var(--primary-color);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 20px;
  transition: all 0.3s ease;
}

.services-overview .highlight-item:hover .highlight-icon {
  background: var(--primary-dark);
  transform: scale(1.1);
}

.services-overview .highlight-item i {
  font-size: 2rem;
  margin-bottom: 0;
}

.services-overview .highlight-item h5 {
  margin-bottom: 10px;
  color: var(--dark-color);
  font-weight: 600;
}

.services-overview .highlight-item p {
  color: var(--muted-color);
  margin-bottom: 0;
  font-size: 0.95rem;
  line-height: 1.5;
}

/* Service Filters */
.service-filters {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 10px;
  margin-bottom: 30px;
}

.filter-btn {
  background: white;
  border: 2px solid var(--primary-color);
  color: var(--primary-color);
  padding: 8px 20px;
  border-radius: 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-weight: 500;
}

.filter-btn:hover,
.filter-btn.active {
  background: var(--primary-color);
  color: white;
}

/* Service Cards */
.service-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.service-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
}

.service-image {
  height: 200px;
  position: relative;
  overflow: hidden;
}

.service-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.service-card:hover .service-image img {
  transform: scale(1.1);
}

.service-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(to bottom, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
  display: flex;
  align-items: flex-end;
  padding: 15px;
}

.service-badges {
  display: flex;
  flex-wrap: wrap;
  gap: 5px;
}

.service-badges .badge {
  font-size: 0.75rem;
}

.service-image-placeholder {
  height: 200px;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 3rem;
}

.service-content {
  padding: 25px;
}

.service-header {
  margin-bottom: 15px;
}

.service-header h3 {
  margin-bottom: 8px;
  color: var(--dark-color);
}

.service-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.service-type {
  font-size: 0.875rem;
  color: var(--secondary-color);
  background: var(--light-color);
  padding: 3px 8px;
  border-radius: 12px;
}

.service-rating {
  display: flex;
  align-items: center;
  gap: 5px;
}

.service-rating i {
  color: var(--warning-color);
  font-size: 0.8rem;
}

.rating-text {
  font-size: 0.8rem;
  color: var(--secondary-color);
}

.service-description {
  color: var(--secondary-color);
  margin-bottom: 15px;
  line-height: 1.6;
}

.service-features {
  margin-bottom: 20px;
}

.service-features h5 {
  font-size: 0.9rem;
  color: var(--dark-color);
  margin-bottom: 10px;
}

.service-features ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.service-features li {
  margin-bottom: 5px;
  font-size: 0.875rem;
  color: var(--secondary-color);
}

.service-features i {
  margin-right: 8px;
  font-size: 0.8rem;
}

.service-pricing {
  background: var(--light-color);
  padding: 15px;
  border-radius: 8px;
  margin-bottom: 20px;
  text-align: center;
}

.price-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 5px;
}

.price-info:last-child {
  margin-bottom: 0;
}

.price-label {
  font-size: 0.875rem;
  color: var(--secondary-color);
}

.price {
  font-weight: 700;
  color: var(--success-color);
  font-size: 1.1rem;
}

.service-actions {
  display: flex;
  gap: 10px;
  margin-bottom: 15px;
}

.service-actions .btn {
  flex: 1;
  font-size: 0.875rem;
  padding: 8px 12px;
}

/* Location Services */
.location-services {
  background: var(--light-color);
  padding: 15px;
  border-radius: 8px;
  margin: 15px 0;
}

.location-services .location-title {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--dark-color);
  margin-bottom: 10px;
}

.location-links {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.location-link {
  background: white;
  color: var(--primary-color);
  padding: 6px 12px;
  border-radius: 15px;
  text-decoration: none;
  font-size: 0.85rem;
  font-weight: 500;
  border: 1px solid var(--primary-color);
  transition: all 0.3s ease;
}

.location-link:hover {
  background: var(--primary-color);
  color: white;
  transform: translateY(-1px);
}

.service-areas {
  text-align: center;
  margin-top: 10px;
}

/* Service Process */
.service-process {
  background: white;
}

.process-step {
  text-align: center;
  position: relative;
  padding: 20px;
}

.step-number {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 30px;
  background: var(--warning-color);
  color: var(--dark-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 0.875rem;
}

.step-icon {
  width: 80px;
  height: 80px;
  background: var(--primary-color);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 30px auto 20px;
  color: white;
  font-size: 2rem;
}

.process-step h4 {
  margin-bottom: 10px;
  color: var(--dark-color);
}

.process-step p {
  color: var(--secondary-color);
  font-size: 0.9rem;
}

/* Service Areas Section */
.service-areas-section .areas-grid {
  display: grid;
  gap: 30px;
  max-width: 600px;
  margin: 0 auto;
}

.primary-area {
  text-align: center;
  padding: 30px;
  background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
  color: white;
  border-radius: 12px;
}

.primary-area i {
  font-size: 2.5rem;
  margin-bottom: 15px;
}

.primary-area h4 {
  margin-bottom: 5px;
  color: white;
}

.surrounding-areas {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
}

.surrounding-areas .area-item {
  background: white;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  gap: 10px;
}

.surrounding-areas .area-item i {
  color: var(--primary-color);
}

.area-note {
  margin-top: 30px;
}

/* Emergency CTA */
.emergency-cta {
  background: var(--danger-color);
}

.emergency-banner {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 12px;
  padding: 40px;
}

.emergency-content {
  display: flex;
  align-items: center;
  gap: 30px;
  color: white;
  text-align: center;
}

.emergency-icon {
  font-size: 4rem;
  color: white;
  animation: pulse 2s infinite;
}

.emergency-text h3 {
  margin-bottom: 10px;
  color: white;
}

.emergency-text p {
  margin: 0;
  opacity: 0.9;
}

.emergency-action .btn-danger {
  background: white;
  color: var(--danger-color);
  border: none;
  font-weight: 600;
}

.emergency-action .btn-danger:hover {
  background: rgba(255, 255, 255, 0.9);
}

/* Filter Animation */
.service-item {
  transition: all 0.3s ease;
}

.service-item.hidden {
  opacity: 0;
  transform: scale(0.8);
  pointer-events: none;
}

/* Responsive Design */
@media (max-width: 992px) {
  .emergency-content {
    flex-direction: column;
    gap: 20px;
  }
  
  .service-actions {
    flex-direction: column;
  }
  
  .service-meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  
  .services-page .page-header {
    padding: 80px 0;
    min-height: 350px;
  }
  
  .page-title {
    font-size: 2.5rem;
  }
  
  .page-subtitle {
    font-size: 1.1rem;
  }
}

@media (max-width: 768px) {
  .service-filters {
    flex-direction: column;
    align-items: center;
  }
  
  .services-page .page-header {
    padding: 60px 0;
    min-height: 300px;
  }
  
  .page-title {
    font-size: 2rem;
  }
  
  .page-subtitle {
    font-size: 1rem;
  }
  
  .filter-btn {
    width: 200px;
  }
  
  .surrounding-areas {
    grid-template-columns: 1fr;
  }
  
  .emergency-banner {
    padding: 20px;
  }
  
  .process-step {
    margin-bottom: 30px;
  }
}

@media (max-width: 576px) {
  .service-badges {
    flex-direction: column;
  }
  
  .service-content {
    padding: 20px;
  }
  
  .price-info {
    flex-direction: column;
    text-align: center;
    gap: 5px;
  }
}
</style>

<script>
// Service filtering functionality
document.addEventListener('DOMContentLoaded', function() {
  const filterButtons = document.querySelectorAll('.filter-btn');
  const serviceItems = document.querySelectorAll('.service-item');
  
  filterButtons.forEach(button => {
    button.addEventListener('click', function() {
      // Remove active class from all buttons
      filterButtons.forEach(btn => btn.classList.remove('active'));
      // Add active class to clicked button
      this.classList.add('active');
      
      const filterValue = this.getAttribute('data-filter');
      
      serviceItems.forEach(item => {
        const itemCategory = item.getAttribute('data-category');
        
        if (filterValue === 'all' || itemCategory === filterValue) {
          item.style.display = 'block';
          item.classList.remove('hidden');
        } else {
          item.classList.add('hidden');
          setTimeout(() => {
            if (item.classList.contains('hidden')) {
              item.style.display = 'none';
            }
          }, 300);
        }
      });
    });
  });
});
</script>
{{ end }}